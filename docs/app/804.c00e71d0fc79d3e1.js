(()=>{var g,Et={804:(g,A,p)=>{"use strict";function z(e){return this instanceof z?(this.v=e,this):new z(e)}function K(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,r=n.apply(e,t||[]),i=[];return o={},a("next"),a("throw"),a("return"),o[Symbol.asyncIterator]=function(){return this},o;function a(O){r[O]&&(o[O]=function(G){return new Promise(function(H,Y){i.push([O,G,H,Y])>1||h(O,G)})})}function h(O,G){try{!function x(O){O.value instanceof z?Promise.resolve(O.value.v).then(m,C):_(i[0][2],O)}(r[O](G))}catch(H){_(i[0][3],H)}}function m(O){h("next",O)}function C(O){h("throw",O)}function _(O,G){O(G),i.shift(),i.length&&h(i[0][0],i[0][1])}}function et(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,t=e[Symbol.asyncIterator];return t?t.call(e):(e=function c(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=e[i]&&function(a){return new Promise(function(h,x){!function o(i,a,h,x){Promise.resolve(x).then(function(m){i({value:m,done:h})},a)}(h,x,(a=e[i](a)).done,a.value)})}}}const L=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function b(e){return"function"==typeof e}function X(e){return b(null==e?void 0:e.then)}const Q=function J(e){const n=e(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,o)=>`${o+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function Z(e,t){if(e){const n=e.indexOf(t);0<=n&&e.splice(n,1)}}class q{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const i of n)i.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(b(r))try{r()}catch(i){t=i instanceof Q?i.errors:[i]}const{_finalizers:o}=this;if(o){this._finalizers=null;for(const i of o)try{Pt(i)}catch(a){t=null!=t?t:[],a instanceof Q?t=[...t,...a.errors]:t.push(a)}}if(t)throw new Q(t)}}add(t){var n;if(t&&t!==this)if(this.closed)Pt(t);else{if(t instanceof q){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}}_hasParent(t){const{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){const{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&Z(n,t)}remove(t){const{_finalizers:n}=this;n&&Z(n,t),t instanceof q&&t._removeParent(this)}}function At(e){return e instanceof q||e&&"closed"in e&&b(e.remove)&&b(e.add)&&b(e.unsubscribe)}function Pt(e){b(e)?e():e.unsubscribe()}q.EMPTY=(()=>{const e=new q;return e.closed=!0,e})();const nt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},at={setTimeout(e,t,...n){const{delegate:r}=at;return(null==r?void 0:r.setTimeout)?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){const{delegate:t}=at;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function Ot(e){at.setTimeout(()=>{const{onUnhandledError:t}=nt;if(!t)throw e;t(e)})}function Ct(){}const Kt=dt("C",void 0,void 0);function dt(e,t,n){return{kind:e,value:t,error:n}}let rt=null;class yt extends q{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,At(t)&&t.add(this)):this.destination=qt}static create(t,n,r){return new mt(t,n,r)}next(t){this.isStopped?vt(function Yt(e){return dt("N",e,void 0)}(t),this):this._next(t)}error(t){this.isStopped?vt(function Vt(e){return dt("E",void 0,e)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?vt(Kt,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Nt=Function.prototype.bind;function pt(e,t){return Nt.call(e,t)}class Qt{constructor(t){this.partialObserver=t}next(t){const{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){ct(r)}}error(t){const{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){ct(r)}else ct(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){ct(n)}}}class mt extends yt{constructor(t,n,r){let o;if(super(),b(t)||!t)o={next:null!=t?t:void 0,error:null!=n?n:void 0,complete:null!=r?r:void 0};else{let i;this&&nt.useDeprecatedNextContext?(i=Object.create(t),i.unsubscribe=()=>this.unsubscribe(),o={next:t.next&&pt(t.next,i),error:t.error&&pt(t.error,i),complete:t.complete&&pt(t.complete,i)}):o=t}this.destination=new Qt(o)}}function ct(e){nt.useDeprecatedSynchronousErrorHandling?function Jt(e){nt.useDeprecatedSynchronousErrorHandling&&rt&&(rt.errorThrown=!0,rt.error=e)}(e):Ot(e)}function vt(e,t){const{onStoppedNotification:n}=nt;n&&at.setTimeout(()=>n(e,t))}const qt={closed:!0,next:Ct,error:function Zt(e){throw e},complete:Ct},gt="function"==typeof Symbol&&Symbol.observable||"@@observable";function te(e){return e}let N=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,o){const i=function ne(e){return e&&e instanceof yt||function ee(e){return e&&b(e.next)&&b(e.error)&&b(e.complete)}(e)&&At(e)}(n)?n:new mt(n,r,o);return function $t(e){if(nt.useDeprecatedSynchronousErrorHandling){const t=!rt;if(t&&(rt={errorThrown:!1,error:null}),e(),t){const{errorThrown:n,error:r}=rt;if(rt=null,n)throw r}}else e()}(()=>{const{operator:a,source:h}=this;i.add(a?a.call(i,h):h?this._subscribe(i):this._trySubscribe(i))}),i}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=Dt(r))((o,i)=>{const a=new mt({next:h=>{try{n(h)}catch(x){i(x),a.unsubscribe()}},error:i,complete:o});this.subscribe(a)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[gt](){return this}pipe(...n){return function It(e){return 0===e.length?te:1===e.length?e[0]:function(n){return e.reduce((r,o)=>o(r),n)}}(n)(this)}toPromise(n){return new(n=Dt(n))((r,o)=>{let i;this.subscribe(a=>i=a,a=>o(a),()=>r(i))})}}return e.create=t=>new e(t),e})();function Dt(e){var t;return null!==(t=null!=e?e:nt.Promise)&&void 0!==t?t:Promise}function Mt(e){return b(e[gt])}function jt(e){return Symbol.asyncIterator&&b(null==e?void 0:e[Symbol.asyncIterator])}function _t(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Gt=function re(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function zt(e){return b(null==e?void 0:e[Gt])}function Lt(e){return K(this,arguments,function*(){const n=e.getReader();try{for(;;){const{value:r,done:o}=yield z(n.read());if(o)return yield z(void 0);yield yield z(r)}}finally{n.releaseLock()}})}function Ft(e){return b(null==e?void 0:e.getReader)}function ot(e){if(e instanceof N)return e;if(null!=e){if(Mt(e))return function ie(e){return new N(t=>{const n=e[gt]();if(b(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(e);if(L(e))return function oe(e){return new N(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}(e);if(X(e))return function se(e){return new N(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,Ot)})}(e);if(jt(e))return Rt(e);if(zt(e))return function ae(e){return new N(t=>{for(const n of e)if(t.next(n),t.closed)return;t.complete()})}(e);if(Ft(e))return function ce(e){return Rt(Lt(e))}(e)}throw _t(e)}function Rt(e){return new N(t=>{(function ue(e,t){var n,r,o,i;return function d(e,t,n,r){return new(n||(n=Promise))(function(i,a){function h(C){try{m(r.next(C))}catch(_){a(_)}}function x(C){try{m(r.throw(C))}catch(_){a(_)}}function m(C){C.done?i(C.value):function o(i){return i instanceof n?i:new n(function(a){a(i)})}(C.value).then(h,x)}m((r=r.apply(e,t||[])).next())})}(this,void 0,void 0,function*(){try{for(n=et(e);!(r=yield n.next()).done;)if(t.next(r.value),t.closed)return}catch(a){o={error:a}}finally{try{r&&!r.done&&(i=n.return)&&(yield i.call(n))}finally{if(o)throw o.error}}t.complete()})})(e,t).catch(n=>t.error(n))})}function ut(e){return t=>{if(function le(e){return b(null==e?void 0:e.lift)}(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function lt(e,t,n,r,o){return new fe(e,t,n,r,o)}class fe extends yt{constructor(t,n,r,o,i,a){super(t),this.onFinalize=i,this.shouldUnsubscribe=a,this._next=n?function(h){try{n(h)}catch(x){t.error(x)}}:super._next,this._error=o?function(h){try{o(h)}catch(x){t.error(x)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(h){t.error(h)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function ft(e,t){return ut((n,r)=>{let o=0;n.subscribe(lt(r,i=>{r.next(e.call(t,i,o++))}))})}function tt(e,t,n,r=0,o=!1){const i=t.schedule(function(){n(),o?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(i),!o)return i}function Ut(e,t,n=1/0){return b(t)?Ut((r,o)=>ft((i,a)=>t(r,i,o,a))(ot(e(r,o))),n):("number"==typeof t&&(n=t),ut((r,o)=>function he(e,t,n,r,o,i,a,h){const x=[];let m=0,C=0,_=!1;const O=()=>{_&&!x.length&&!m&&t.complete()},G=Y=>m<r?H(Y):x.push(Y),H=Y=>{i&&t.next(Y),m++;let st=!1;ot(n(Y,C++)).subscribe(lt(t,$=>{null==o||o($),i?G($):t.next($)},()=>{st=!0},void 0,()=>{if(st)try{for(m--;x.length&&m<r;){const $=x.shift();a?tt(t,a,()=>H($)):H($)}O()}catch($){t.error($)}}))};return e.subscribe(lt(t,G,()=>{_=!0,O()})),()=>{null==h||h()}}(r,o,e,n)))}const{isArray:de}=Array;const me=["addListener","removeListener"],ve=["addEventListener","removeEventListener"],ge=["on","off"];function xt(e,t,n,r){if(b(n)&&(r=n,n=void 0),r)return xt(e,t,n).pipe(function pe(e){return ft(t=>function ye(e,t){return de(t)?e(...t):e(t)}(e,t))}(r));const[o,i]=function be(e){return b(e.addEventListener)&&b(e.removeEventListener)}(e)?ve.map(a=>h=>e[a](t,h,n)):function xe(e){return b(e.addListener)&&b(e.removeListener)}(e)?me.map(kt(e,t)):function we(e){return b(e.on)&&b(e.off)}(e)?ge.map(kt(e,t)):[];if(!o&&L(e))return Ut(a=>xt(a,t,n))(ot(e));if(!o)throw new TypeError("Invalid event target");return new N(a=>{const h=(...x)=>a.next(1<x.length?x:x[0]);return o(h),()=>i(h)})}function kt(e,t){return n=>r=>e[n](t,r)}function Wt(e,t=0){return ut((n,r)=>{n.subscribe(lt(r,o=>tt(r,e,()=>r.next(o),t),()=>tt(r,e,()=>r.complete(),t),o=>tt(r,e,()=>r.error(o),t)))})}function Bt(e,t=0){return ut((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function Xt(e,t){if(!e)throw new Error("Iterable cannot be null");return new N(n=>{tt(n,t,()=>{const r=e[Symbol.asyncIterator]();tt(n,t,()=>{r.next().then(o=>{o.done?n.complete():n.next(o.value)})},0,!0)})})}function Me(...e){return function De(e,t){return t?function Ie(e,t){if(null!=e){if(Mt(e))return function Te(e,t){return ot(e).pipe(Bt(t),Wt(t))}(e,t);if(L(e))return function Pe(e,t){return new N(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}(e,t);if(X(e))return function Ae(e,t){return ot(e).pipe(Bt(t),Wt(t))}(e,t);if(jt(e))return Xt(e,t);if(zt(e))return function Oe(e,t){return new N(n=>{let r;return tt(n,t,()=>{r=e[Gt](),tt(n,t,()=>{let o,i;try{({value:o,done:i}=r.next())}catch(a){return void n.error(a)}i?n.complete():n.next(o)},0,!0)}),()=>b(null==r?void 0:r.return)&&r.return()})}(e,t);if(Ft(e))return function Ce(e,t){return Xt(Lt(e),t)}(e,t)}throw _t(e)}(e,t):ot(e)}(e,function Ee(e){return function Se(e){return e&&b(e.schedule)}(function wt(e){return e[e.length-1]}(e))?e.pop():void 0}(e))}var je=p(340);class bt{constructor(t,n,r=null,o=null,i){this.debugCanvasContext=null,this.trackCanvasContext=null,this.width=t,this.height=n,null!==o&&(this.trackCanvasContext=o.getContext("2d")),null!==r&&(this.debugCanvasContext=r.getContext("2d")),this.gates=i}drawPoint(t,n,r="#fff"){null!==t&&(t.fillStyle=r,t.fillRect(n[0]-1,n[1]-1,2,2))}drawGate(t,n,r="#f00",o="#0f0"){null!==t&&(this.drawPoint(t,n[0],r),this.drawPoint(t,n[1],o))}drawLine(t,n,r="#f00"){null!==t&&(t.strokeStyle=r,t.beginPath(),t.moveTo(n[0][0],n[0][1]),t.lineTo(n[1][0],n[1][1]),t.stroke())}serialize(){return JSON.stringify({width:this.width,height:this.height,gates:this.gates})}static unserialize(t){const n=JSON.parse(t);return new bt(n.width,n.height,null,null,n.gates)}firstGate(){return this.gates[0]}lastGate(){return this.gates[this.gates.length-1]}deleteLastGates(t){this.gates.splice(this.gates.length-t,t)}drawTrack(t=0,n=-1){if(null!==this.trackCanvasContext){this.trackCanvasContext.clearRect(0,0,this.width,this.height),n<0&&(n=this.gates.length);for(let r=t;r<n;r++)this.drawGate(this.trackCanvasContext,this.gates[r])}}}class St{constructor(t,n,r,o="random",i=""){this.xComputeFactor=.5,this.yComputeFactor=.5,this.angleComputeFactor=9,this.maxCurve=Math.PI/4,this.gateDistance=10,this.curveComputeCount=4,this.maxSegments=1e5,this.maxIterations=1e6,this.minGateHalfSize=5,this.maxGateHalfSize=15,this.gateHalfSizeRandomFactor=3,this.TWO_PI=2*Math.PI,this.track=t,this.startGate=n,this.endGate=r,this.mode=o,""===i&&(i=(""+Math.random()).substring(2)),this.seed=i,this.random=je(i)}pointEquals(t,n){return t[0]==n[0]&&t[1]==n[1]}lineEqualsStrict(t,n){return this.pointEquals(t[0],n[0])&&this.pointEquals(t[1],n[1])}gateCenterPos(t){return[t[0][0]+.5*(t[1][0]-t[0][0]),t[0][1]+.5*(t[1][1]-t[0][1])]}normalizeAngle(t){return t-this.TWO_PI*Math.floor((t+Math.PI)/this.TWO_PI)}normalizeAngle10(t){return(t+Math.PI)/this.TWO_PI}vectorAngle(t){return Math.atan2(t[1],t[0])}angleToVector(t){return[Math.cos(t),Math.sin(t)]}angleToVectorMultiplied(t,n){return[Math.cos(t)*n,Math.sin(t)*n]}lineAngle(t){return this.vectorAngle([t[1][0]-t[0][0],t[1][1]-t[0][1]])}gateAngle(t){return this.normalizeAngle(this.lineAngle(t)-.5*Math.PI)}lineLengthUnnormed(t){const n=t[0][0]-t[1][0],r=t[0][1]-t[1][1];return n*n+r*r}lineLength(t){return Math.sqrt(this.lineLengthUnnormed(t))}pointToGate(t,n,r){return[this.pointTravel(t,n-.5*Math.PI,r),this.pointTravel(t,n+.5*Math.PI,r)]}pointTravel(t,n,r){return[t[0]+Math.cos(n)*r,t[1]+Math.sin(n)*r]}pointOutBounds(t){return t[0]<0||t[1]<0||t[0]>this.track.width||t[1]>this.track.height}lineOutBounds(t){return this.pointOutBounds(t[0])||this.pointOutBounds(t[1])}lineIntersectionPoint(t,n){let _,O,G,r=t[0][0],o=t[0][1],i=t[1][0],a=t[1][1],h=n[0][0],x=n[0][1],m=n[1][0],C=n[1][1];return _=(i-r)*(C-x)-(m-h)*(a-o),0!==_&&(G=((C-x)*(m-r)+(h-m)*(C-o))/_,O=((o-a)*(m-r)+(i-r)*(C-o))/_,0<G&&G<1&&0<O&&O<1)?[r+G*(i-r),o+G*(a-o)]:null}gateHasCollision(t,n,r){if(this.lineOutBounds(n))return!0;for(let o of[[t[0],n[0]],[n[0],n[1]],[n[1],t[1]]]){const i=this.track.gates.concat(r);for(let a=i.length-1;a>1;a--)for(let h of[0,1])if(null!==this.lineIntersectionPoint([o[0],o[1]],[i[a][h],i[a-1][h]]))return!0}return!1}serialize(){return JSON.stringify({track:this.track.serialize(),start:this.startGate,end:this.endGate,mode:this.mode,seed:this.seed})}static unserialize(t){const n=JSON.parse(t);return new St(bt.unserialize(n.track),n.start,n.end,n.mode,n.seed)}calcMaxGateHalfSize(t,n){let a,r=this.pointToGate(t,n,this.track.width*this.track.height),o=t,i=1e3;for(let h=this.track.gates.length-1;h>1;h--){if(a=this.lineIntersectionPoint([r[0],r[1]],[this.track.gates[h][0],this.track.gates[h-1][0]]),null!==a){const x=this.lineLength([a,t]);x<i&&(o=a,i=x)}if(a=this.lineIntersectionPoint([r[0],r[1]],[this.track.gates[h][1],this.track.gates[h-1][1]]),null!==a){const x=this.lineLength([a,t]);x<i&&(o=a,i=x)}}return i}predictDirections(t,n,r){const o=this.lineAngle([t,n]),i=this.normalizeAngle(o-r),a=[this.normalizeAngle(r)];for(let x=this.curveComputeCount-1;x>0;x--)a.push(this.normalizeAngle(r+x*this.maxCurve/this.curveComputeCount)),a.push(this.normalizeAngle(r-x*this.maxCurve/this.curveComputeCount));a.sort((x,m)=>i-x-(i-m));const h=[];for(const x of a)h.push(this.angleToVectorMultiplied(x,this.gateDistance));return h}randomShuffle(t){return t.sort(()=>.5-this.random())}pointAngleMatches(t,n,r,o){return!(this.lineLengthUnnormed([t,r])>10||Math.abs(this.normalizeAngle(n-o))>.1)}posAngleToGrid(t,n){return[Math.floor(t[1]*this.yComputeFactor),Math.floor(t[0]*this.xComputeFactor),Math.floor(this.normalizeAngle10(n)*this.angleComputeFactor)]}isValidGridPos(t,n){return t[0]>=0&&t[0]<n[0]&&t[1]>=0&&t[1]<n[1]&&t[2]>=0&&t[2]<n[2]}findTrackDFS(t=0){const n=[],r=this.gateCenterPos(this.endGate),o=this.gateAngle(this.endGate),i=this.posAngleToGrid([this.track.width,this.track.height],Math.PI);console.log(i);const a=new Array(i[0]);for(let h=0;h<i[0];h++){a[h]=new Array(i[1]);for(let x=0;x<i[1];x++){a[h][x]=new Array(i[2]);for(let m=0;m<i[2];m++)a[h][x][m]=!1}}for(n.push([this.startGate,[]]);;){let h=n.pop();if(void 0===h)return this.angleComputeFactor+=1,this.findTrackDFS(t);const x=h[0],m=h[1],C=this.gateCenterPos(x),_=this.gateAngle(x),O=this.posAngleToGrid(C,_);a[O[0]][O[1]][O[2]]=!0;const G=this.pointAngleMatches(C,_,r,o);if(G||m.length>this.maxSegments)return[m,G,t];let H=this.predictDirections(C,r,_);switch(this.mode){case"worst":H=H.reverse();break;case"random":H=this.randomShuffle(H)}for(let Y of H){const st=[C[0]+Y[0],C[1]+Y[1]],$=this.vectorAngle(Y),Ht=this.pointToGate(st,$,this.minGateHalfSize),ht=this.posAngleToGrid(st,$);this.isValidGridPos(ht,i)&&!a[ht[0]][ht[1]][ht[2]]&&!this.gateHasCollision(x,Ht,m)&&n.push([Ht,m.concat([x])])}if(++t>this.maxIterations)return[[],!1,t]}}generate(){const t=(new Date).getTime(),n=this.findTrackDFS(),r=(new Date).getTime()-t;if(0==n[0].length)return console.log("path was not found!"),[r,n[2]];const o=n[0];n[1]&&console.log("path is finished");const i=o.length;for(let a=0;a<i;a++)a>0&&this.track.gates.push(o[a]),a>0&&this.track.drawGate(this.track.debugCanvasContext,o[a]);return[r,n[2]]}findTrackDFSWorker(){if("undefined"!=typeof Worker){const t=new Worker(p.tu(new URL(p.p+p.u(804),p.b))),n=xt(t,"message").pipe(ft(r=>r.data));return t.postMessage(this.serialize()),n}return Me(this.findTrackDFS())}workerGenerate(){const t=(new Date).getTime();return this.findTrackDFSWorker().pipe(ft(n=>{const r=(new Date).getTime()-t;if(0==n[0].length)return console.log("path was not found!"),[r,n[2]];const o=n[0];n[1]&&console.log("path is finished");const i=o.length;for(let a=0;a<i;a++)a>0&&this.track.gates.push(o[a]),a>0&&this.track.drawGate(this.track.debugCanvasContext,o[a]);return[r,n[2]]}))}}addEventListener("message",({data:e})=>{const t=St.unserialize(e);postMessage(t.findTrackDFS())})},340:(g,A,p)=>{var E=p(471),R=p(992),w=p(657),U=p(583),I=p(929),D=p(83),S=p(818);S.alea=E,S.xor128=R,S.xorwow=w,S.xorshift7=U,S.xor4096=I,S.tychei=D,g.exports=S},471:function(g,A,p){var E;!function(R,w,U){function I(s){var l=this,f=function d(){var s=4022871197;return function(f){f=String(f);for(var c=0;c<f.length;c++){var u=.02519603282416938*(s+=f.charCodeAt(c));u-=s=u>>>0,s=(u*=s)>>>0,s+=4294967296*(u-=s)}return 2.3283064365386963e-10*(s>>>0)}}();l.next=function(){var c=2091639*l.s0+2.3283064365386963e-10*l.c;return l.s0=l.s1,l.s1=l.s2,l.s2=c-(l.c=0|c)},l.c=1,l.s0=f(" "),l.s1=f(" "),l.s2=f(" "),l.s0-=f(s),l.s0<0&&(l.s0+=1),l.s1-=f(s),l.s1<0&&(l.s1+=1),l.s2-=f(s),l.s2<0&&(l.s2+=1),f=null}function D(s,l){return l.c=s.c,l.s0=s.s0,l.s1=s.s1,l.s2=s.s2,l}function S(s,l){var f=new I(s),c=l&&l.state,u=f.next;return u.int32=function(){return 4294967296*f.next()|0},u.double=function(){return u()+11102230246251565e-32*(2097152*u()|0)},u.quick=u,c&&("object"==typeof c&&D(c,f),u.state=function(){return D(f,{})}),u}w&&w.exports?w.exports=S:p.amdD&&p.amdO?void 0!==(E=function(){return S}.call(A,p,A,w))&&(w.exports=E):this.alea=S}(0,g=p.nmd(g))},83:function(g,A,p){var E;!function(R,w,U){function I(d){var s=this,l="";s.next=function(){var c=s.b,u=s.c,y=s.d,v=s.a;return c=c<<25^c>>>7^u,u=u-y|0,y=y<<24^y>>>8^v,v=v-c|0,s.b=c=c<<20^c>>>12^u,s.c=u=u-y|0,s.d=y<<16^u>>>16^v,s.a=v-c|0},s.a=0,s.b=0,s.c=-1640531527,s.d=1367130551,d===Math.floor(d)?(s.a=d/4294967296|0,s.b=0|d):l+=d;for(var f=0;f<l.length+20;f++)s.b^=0|l.charCodeAt(f),s.next()}function D(d,s){return s.a=d.a,s.b=d.b,s.c=d.c,s.d=d.d,s}function S(d,s){var l=new I(d),f=s&&s.state,c=function(){return(l.next()>>>0)/4294967296};return c.double=function(){do{var v=((l.next()>>>11)+(l.next()>>>0)/4294967296)/(1<<21)}while(0===v);return v},c.int32=l.next,c.quick=c,f&&("object"==typeof f&&D(f,l),c.state=function(){return D(l,{})}),c}w&&w.exports?w.exports=S:p.amdD&&p.amdO?void 0!==(E=function(){return S}.call(A,p,A,w))&&(w.exports=E):this.tychei=S}(0,g=p.nmd(g))},992:function(g,A,p){var E;!function(R,w,U){function I(d){var s=this,l="";s.x=0,s.y=0,s.z=0,s.w=0,s.next=function(){var c=s.x^s.x<<11;return s.x=s.y,s.y=s.z,s.z=s.w,s.w^=s.w>>>19^c^c>>>8},d===(0|d)?s.x=d:l+=d;for(var f=0;f<l.length+64;f++)s.x^=0|l.charCodeAt(f),s.next()}function D(d,s){return s.x=d.x,s.y=d.y,s.z=d.z,s.w=d.w,s}function S(d,s){var l=new I(d),f=s&&s.state,c=function(){return(l.next()>>>0)/4294967296};return c.double=function(){do{var v=((l.next()>>>11)+(l.next()>>>0)/4294967296)/(1<<21)}while(0===v);return v},c.int32=l.next,c.quick=c,f&&("object"==typeof f&&D(f,l),c.state=function(){return D(l,{})}),c}w&&w.exports?w.exports=S:p.amdD&&p.amdO?void 0!==(E=function(){return S}.call(A,p,A,w))&&(w.exports=E):this.xor128=S}(0,g=p.nmd(g))},929:function(g,A,p){var E;!function(R,w,U){function I(d){var s=this;s.next=function(){var y,v,f=s.w,c=s.X,u=s.i;return s.w=f=f+1640531527|0,v=c[u+34&127],y=c[u=u+1&127],v^=v<<13,y^=y<<17,v=c[u]=(v^=v>>>15)^(y^=y>>>12),s.i=u,v+(f^f>>>16)|0},function l(f,c){var u,y,v,k,z,K=[],it=128;for(c===(0|c)?(y=c,c=null):(c+="\0",y=0,it=Math.max(it,c.length)),v=0,k=-32;k<it;++k)c&&(y^=c.charCodeAt((k+32)%c.length)),0===k&&(z=y),y^=y<<10,y^=y>>>15,y^=y<<4,y^=y>>>13,k>=0&&(v=0==(u=K[127&k]^=y+(z=z+1640531527|0))?v+1:0);for(v>=128&&(K[127&(c&&c.length||0)]=-1),v=127,k=512;k>0;--k)y=K[v+34&127],u=K[v=v+1&127],y^=y<<13,u^=u<<17,K[v]=(y^=y>>>15)^(u^=u>>>12);f.w=z,f.X=K,f.i=v}(s,d)}function D(d,s){return s.i=d.i,s.w=d.w,s.X=d.X.slice(),s}function S(d,s){null==d&&(d=+new Date);var l=new I(d),f=s&&s.state,c=function(){return(l.next()>>>0)/4294967296};return c.double=function(){do{var v=((l.next()>>>11)+(l.next()>>>0)/4294967296)/(1<<21)}while(0===v);return v},c.int32=l.next,c.quick=c,f&&(f.X&&D(f,l),c.state=function(){return D(l,{})}),c}w&&w.exports?w.exports=S:p.amdD&&p.amdO?void 0!==(E=function(){return S}.call(A,p,A,w))&&(w.exports=E):this.xor4096=S}(0,g=p.nmd(g))},583:function(g,A,p){var E;!function(R,w,U){function I(d){var s=this;s.next=function(){var u,y,f=s.x,c=s.i;return u=f[c],y=(u^=u>>>7)^u<<24,y^=(u=f[c+1&7])^u>>>10,y^=(u=f[c+3&7])^u>>>3,y^=(u=f[c+4&7])^u<<7,u=f[c+7&7],f[c]=y^=(u^=u<<13)^u<<9,s.i=c+1&7,y},function l(f,c){var u,v=[];if(c===(0|c))v[0]=c;else for(c=""+c,u=0;u<c.length;++u)v[7&u]=v[7&u]<<15^c.charCodeAt(u)+v[u+1&7]<<13;for(;v.length<8;)v.push(0);for(u=0;u<8&&0===v[u];++u);for(8==u&&(v[7]=-1),f.x=v,f.i=0,u=256;u>0;--u)f.next()}(s,d)}function D(d,s){return s.x=d.x.slice(),s.i=d.i,s}function S(d,s){null==d&&(d=+new Date);var l=new I(d),f=s&&s.state,c=function(){return(l.next()>>>0)/4294967296};return c.double=function(){do{var v=((l.next()>>>11)+(l.next()>>>0)/4294967296)/(1<<21)}while(0===v);return v},c.int32=l.next,c.quick=c,f&&(f.x&&D(f,l),c.state=function(){return D(l,{})}),c}w&&w.exports?w.exports=S:p.amdD&&p.amdO?void 0!==(E=function(){return S}.call(A,p,A,w))&&(w.exports=E):this.xorshift7=S}(0,g=p.nmd(g))},657:function(g,A,p){var E;!function(R,w,U){function I(d){var s=this,l="";s.next=function(){var c=s.x^s.x>>>2;return s.x=s.y,s.y=s.z,s.z=s.w,s.w=s.v,(s.d=s.d+362437|0)+(s.v=s.v^s.v<<4^c^c<<1)|0},s.x=0,s.y=0,s.z=0,s.w=0,s.v=0,d===(0|d)?s.x=d:l+=d;for(var f=0;f<l.length+64;f++)s.x^=0|l.charCodeAt(f),f==l.length&&(s.d=s.x<<10^s.x>>>4),s.next()}function D(d,s){return s.x=d.x,s.y=d.y,s.z=d.z,s.w=d.w,s.v=d.v,s.d=d.d,s}function S(d,s){var l=new I(d),f=s&&s.state,c=function(){return(l.next()>>>0)/4294967296};return c.double=function(){do{var v=((l.next()>>>11)+(l.next()>>>0)/4294967296)/(1<<21)}while(0===v);return v},c.int32=l.next,c.quick=c,f&&("object"==typeof f&&D(f,l),c.state=function(){return D(l,{})}),c}w&&w.exports?w.exports=S:p.amdD&&p.amdO?void 0!==(E=function(){return S}.call(A,p,A,w))&&(w.exports=E):this.xorwow=S}(0,g=p.nmd(g))},818:function(g,A,p){var E;!function(R,w,U){var u,I=256,s=U.pow(I,6),l=U.pow(2,52),f=2*l,c=255;function y(T,P,F){var j=[],M=K(z((P=1==P?{entropy:!0}:P||{}).entropy?[T,et(w)]:null==T?function it(){try{var T;return u&&(T=u.randomBytes)?T=T(I):(T=new Uint8Array(I),(R.crypto||R.msCrypto).getRandomValues(T)),et(T)}catch(j){var P=R.navigator,F=P&&P.plugins;return[+new Date,R,F,R.screen,et(w)]}}():T,3),j),B=new v(j),V=function(){for(var L=B.g(6),b=s,X=0;L<l;)L=(L+X)*I,b*=I,X=B.g(1);for(;L>=f;)L/=2,b/=2,X>>>=1;return(L+X)/b};return V.int32=function(){return 0|B.g(4)},V.quick=function(){return B.g(4)/4294967296},V.double=V,K(et(B.S),w),(P.pass||F||function(L,b,X,J){return J&&(J.S&&k(J,B),L.state=function(){return k(B,{})}),X?(U.random=L,b):L})(V,M,"global"in P?P.global:this==U,P.state)}function v(T){var P,F=T.length,j=this,M=0,B=j.i=j.j=0,V=j.S=[];for(F||(T=[F++]);M<I;)V[M]=M++;for(M=0;M<I;M++)V[M]=V[B=c&B+T[M%F]+(P=V[M])],V[B]=P;(j.g=function(L){for(var b,X=0,J=j.i,Q=j.j,Z=j.S;L--;)b=Z[J=c&J+1],X=X*I+Z[c&(Z[J]=Z[Q=c&Q+b])+(Z[Q]=b)];return j.i=J,j.j=Q,X})(I)}function k(T,P){return P.i=T.i,P.j=T.j,P.S=T.S.slice(),P}function z(T,P){var M,F=[],j=typeof T;if(P&&"object"==j)for(M in T)try{F.push(z(T[M],P-1))}catch(B){}return F.length?F:"string"==j?T:T+"\0"}function K(T,P){for(var j,F=T+"",M=0;M<F.length;)P[c&M]=c&(j^=19*P[c&M])+F.charCodeAt(M++);return et(P)}function et(T){return String.fromCharCode.apply(0,T)}if(K(U.random(),w),g.exports){g.exports=y;try{u=p(42)}catch(T){}}else void 0!==(E=function(){return y}.call(A,p,A,g))&&(g.exports=E)}("undefined"!=typeof self?self:this,[],Math)},42:()=>{}},Tt={};function W(g){var A=Tt[g];if(void 0!==A)return A.exports;var p=Tt[g]={id:g,loaded:!1,exports:{}};return Et[g].call(p.exports,p,p.exports,W),p.loaded=!0,p.exports}W.m=Et,W.amdD=function(){throw new Error("define cannot be used indirect")},W.amdO={},W.u=g=>g+".c00e71d0fc79d3e1.js",W.o=(g,A)=>Object.prototype.hasOwnProperty.call(g,A),W.nmd=g=>(g.paths=[],g.children||(g.children=[]),g),W.tt=()=>(void 0===g&&(g={createScriptURL:A=>A},"undefined"!=typeof trustedTypes&&trustedTypes.createPolicy&&(g=trustedTypes.createPolicy("angular#bundler",g))),g),W.tu=g=>W.tt().createScriptURL(g),W.p="",W.b=self.location+"",W(804)})();